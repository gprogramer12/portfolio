$dots: 12;
$radius: 40;
$stroke: 2;
$circumference: 2 * 3.14159265 * $radius;
$dash: $circumference / ($dots * 2);
$gap: $dash;

:host {
  display: inline-block;
}

/* spinner container */
.dot-spinner {
  /* Default: mobile first â†’ size = width of viewport */
  inline-size: 100vw;
  block-size: auto;
  aspect-ratio: 1 / 1; // keep it square
  color: #4f46e5;

  .dot-spinner__ring {
    inline-size: 100%;
    block-size: 100%;
    transform-origin: 50% 50%;

    circle {
      fill: none;
      stroke: currentColor;
      stroke-width: $stroke;
      stroke-linecap: round;
      stroke-dasharray: #{$dash} #{$gap};
    }

    -webkit-mask-image: conic-gradient(
      from -90deg,
      #000 0turn,
      #000 var(--reveal),
      transparent var(--reveal)
    );
    mask-image: conic-gradient(
      from -90deg,
      #000 0turn,
      #000 var(--reveal),
      transparent var(--reveal)
    );

    animation:
      dot-spin 0.9s ease-out both,
      dot-reveal 0.9s ease-out forwards;
  }
}

/* On wider viewports (desktop), make it fit height */
@media (min-aspect-ratio: 4/3) {
  .dot-spinner {
    inline-size: auto;
    block-size: 100vh;
  }
}

@keyframes dot-spin {
  from {
    transform: rotate(0turn);
  }
  to {
    transform: rotate(1turn);
  }
}

@keyframes dot-reveal {
  from {
    --reveal: 0.08turn;
  }
  to {
    --reveal: 1turn;
  }
}

@media (prefers-reduced-motion: reduce) {
  .dot-spinner .dot-spinner__ring {
    animation: dot-reveal 3000ms linear forwards;
  }
}
